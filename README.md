# aira

å¯å­¦ä¹ çš„æŒä¹…æ€§é«˜æ€§èƒ½æœºå™¨äººï¼

## å¿«é€Ÿæ¦‚è§ˆ
- æ¶æ„è®¾è®¡è¯¦è§ `docs/architecture.md`
- é»˜è®¤è§’è‰²é…ç½® `config/profiles/aira.toml`
- å…¨å±€é…ç½® `config/aira.toml`
- `uv` ç®¡ç†ä¾èµ–ä¸è™šæ‹Ÿç¯å¢ƒ

## åŠŸèƒ½è§„åˆ’
- æŒç»­å¯¹è¯ï¼šçŸ­æœŸç¼“å­˜ + é•¿æœŸå‘é‡è®°å¿†
- å¤šæ¨¡æ€æ¨¡å‹æ”¯æŒï¼šGeminiã€GPTã€Claudeã€Qwenã€Kimiã€Deepseekã€OpenRouter ç­‰
- å·¥å…·ä¸ MCPï¼šç»Ÿä¸€å·¥å…·åè®®ï¼Œæ”¯æŒæœ¬åœ°æ’ä»¶ä¸ MCP Server
- ç»Ÿè®¡ç›‘æ§ï¼štoken æ¶ˆè€—ã€æ¨ç†æ—¶é•¿ã€æˆæœ¬ä¼°ç®—
- è§’è‰²ç®¡ç†ï¼šTOML å¯é…ç½®ï¼Œé»˜è®¤"å¯å¡‘æ€§è®°å¿†çš„è‰¾æ‹‰"
- æ¥å£å½¢æ€ï¼šREST API + CLI + æ¡Œé¢å‰ç«¯ä¸‰ç§å½¢æ€

## âœ¨ é«˜çº§åŠŸèƒ½

Airaç°å·²æ”¯æŒå››å¤§é«˜çº§åŠŸèƒ½ï¼Œè®©AIåŠ©æ‰‹æ›´åŠ æ™ºèƒ½å’Œç”ŸåŠ¨ï¼š

### ğŸ§  é•¿æœŸäººæ ¼è¿›åŒ–
- **æ ¹æ®äº¤äº’å†å²åŠ¨æ€è°ƒæ•´æ€§æ ¼**ï¼šæ¸©æš–åº¦ã€å¹½é»˜æ„Ÿã€å…±æƒ…åŠ›ç­‰7ç§ç‰¹å¾è‡ªåŠ¨è¿›åŒ–
- **ç”¨æˆ·åå¥½å­¦ä¹ **ï¼šç»Ÿè®¡åé¦ˆã€æƒ…æ„Ÿã€è¯é¢˜ï¼Œè®©AIè¶Šæ¥è¶Šæ‡‚ä½ 
- **çŠ¶æ€æŒä¹…åŒ–**ï¼šè¿›åŒ–æ•°æ®è‡ªåŠ¨ä¿å­˜ï¼Œé‡å¯ä¸ä¸¢å¤±

### ğŸ‘ï¸ è§†è§‰è®¤çŸ¥
- **è¡¨æƒ…è¯†åˆ«**ï¼šé€šè¿‡æ‘„åƒå¤´è¯†åˆ«ç”¨æˆ·çš„9ç§æƒ…ç»ªçŠ¶æ€
- **å§¿æ€æ£€æµ‹**ï¼šæ£€æµ‹ç”¨æˆ·åå§¿ï¼Œè¯„ä¼°å‚ä¸åº¦å’Œç–²åŠ³åº¦
- **æ™ºèƒ½å“åº”**ï¼šæ ¹æ®ç”¨æˆ·çŠ¶æ€è‡ªåŠ¨è°ƒæ•´å›å¤ç­–ç•¥
- ä¾èµ–ï¼šOpenCV + MediaPipe

### ğŸ­ 3D Avataræ§åˆ¶
- **å¤šå¹³å°æ”¯æŒ**ï¼šUnity3Dã€VRoidã€Live2D
- **æƒ…ç»ªé©±åŠ¨è¡¨è¾¾**ï¼šæ ¹æ®å¯¹è¯å†…å®¹è‡ªåŠ¨æ§åˆ¶Avatarè¡¨æƒ…å’ŒåŠ¨ä½œ
- **å®æ—¶å£å‹åŒæ­¥**ï¼šæ”¯æŒè¯­éŸ³é©±åŠ¨çš„å£å‹åŠ¨ç”»
- **çœ¼çƒè¿½è¸ª**ï¼šAvatarå¯ä»¥çœ‹å‘ç”¨æˆ·æˆ–å…¶ä»–ç›®æ ‡

### ğŸ‘¥ å¤šAgentç¤¾äº¤
- **å¤šAIå¯¹è¯**ï¼šä¸åŒäººæ ¼çš„AIä¹‹é—´å¯ä»¥äº’ç›¸å¯¹è¯
- **ç¤¾äº¤åœºæ™¯**ï¼šæ”¯æŒè¾©è®ºã€é—²èŠã€æ•™å­¦ã€è§’è‰²æ‰®æ¼”ç­‰åœºæ™¯
- **å…³ç³»è¿½è¸ª**ï¼šè®°å½•Agentä¹‹é—´çš„å…³ç³»å˜åŒ–
- **å¯¹è¯è®°å½•**ï¼šå®Œæ•´ä¿å­˜å¤šAgentäº¤äº’å†å²

è¯¦ç»†æ–‡æ¡£ï¼š
- ğŸ“– [é«˜çº§åŠŸèƒ½ä½¿ç”¨æŒ‡å—](docs/advanced_features_guide.md)
- ğŸ“ [åŠŸèƒ½å®ç°æ€»ç»“](ADVANCED_FEATURES.md)
- ğŸ® [ç¤ºä¾‹ä»£ç ](examples/advanced_features_demo.py)

## é¡¹ç›®ç»“æ„
- `aira/core`ï¼šé…ç½®åŠ è½½ç­‰åŸºç¡€ç»„ä»¶
- `aira/dialogue`ï¼šå¯¹è¯ç¼–æ’å™¨
- `aira/memory`ï¼šè®°å¿†æœåŠ¡
- `aira/models`ï¼šæ¨¡å‹ç½‘å…³ä¸é€‚é…å™¨
- `aira/translation`ï¼šæ™ºèƒ½ç¿»è¯‘Agent
- `aira/tts`ï¼šTTSè¯­éŸ³åˆæˆæ¨¡å—
- `aira/asr`ï¼šASRè¯­éŸ³è¯†åˆ«æ¨¡å—
- `aira/tools`ï¼šæ’ä»¶æ³¨å†Œä¸å·¥å…·è°ƒåº¦
- `aira/stats`ï¼šç»Ÿè®¡ä¸ç›‘æ§
- `aira/monitor`ï¼šç‹¬ç«‹ç›‘æ§WebæœåŠ¡
- `aira/server/api`ï¼šFastAPI æœåŠ¡å…¥å£
- `aira/server/cli`ï¼šTyper CLI å…¥å£
- `aira/desktop`ï¼šPyQt6 æ¡Œé¢å‰ç«¯

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–
```bash
# åŸºç¡€å®‰è£…
uv sync

# å®‰è£…æ‰€æœ‰é«˜çº§åŠŸèƒ½ï¼ˆæ¨èï¼‰
uv pip install -e ".[full]"
```

### 2. é…ç½®æ¨¡å‹ï¼ˆä¸‰é€‰ä¸€ï¼‰

**é€‰é¡¹ A: OpenAIï¼ˆå›½é™…ç”¨æˆ·ï¼‰**
```bash
# åˆ›å»º .env æ–‡ä»¶
echo "OPENAI_API_KEY=sk-your-key" > .env

# ç¼–è¾‘ config/aira.toml
default_model = "openai:gpt-4o-mini"
```

> ğŸ’¡ **æ”¯æŒ OpenAI å…¼å®¹æœåŠ¡**ï¼šå¯é€šè¿‡ `OPENAI_BASE_URL` ä½¿ç”¨ä»»ä½•å…¼å®¹ APIï¼ˆå›½å†…ä¸­è½¬ã€DeepSeekã€Azure ç­‰ï¼‰  
> è¯¦è§ [OPENAI_COMPATIBLE_README.md](OPENAI_COMPATIBLE_README.md)

**é€‰é¡¹ B: DeepSeekï¼ˆå›½å†…æ¨èï¼‰**
```bash
echo "DEEPSEEK_API_KEY=your-key" > .env
# config/aira.toml
default_model = "deepseek:deepseek-chat"
```

**é€‰é¡¹ C: Ollamaï¼ˆæœ¬åœ°å…è´¹ï¼‰**
```bash
# å®‰è£… Ollama: https://ollama.com
ollama pull llama3

# config/aira.toml
default_model = "ollama:llama3"
```

**è¯¦ç»†é…ç½®**: å‚é˜… [OPENAI_SETUP_GUIDE.md](OPENAI_SETUP_GUIDE.md)

### 3. è¿è¡Œ
```bash
# æµ‹è¯•
uv run python examples/quick_test_advanced.py

# å¯åŠ¨å¯¹è¯
uv run python -m aira.server.cli chat
```

## å¼€å‘è¯´æ˜
```bash
# å®‰è£…æ¡Œé¢å‰ç«¯ä¾èµ–ï¼ˆå¯é€‰ï¼‰
uv sync --extra desktop

# åˆ†æ¨¡å—å®‰è£…é«˜çº§åŠŸèƒ½ï¼ˆå¯é€‰ï¼‰
uv pip install -e ".[vision]"    # è§†è§‰è®¤çŸ¥
uv pip install -e ".[avatar]"    # Avataræ§åˆ¶
uv pip install -e ".[social]"    # å¤šAgentç¤¾äº¤

# è¿è¡Œ CLIï¼ˆå…¥å£ä¸º main.pyï¼‰
uv run python -m aira.server.cli --help

# å¯åŠ¨ API æœåŠ¡
uv run uvicorn aira.server.api:create_app --factory --reload

# å¯åŠ¨ CLI äº¤äº’å¯¹è¯ï¼ˆæ”¯æŒæµå¼è¾“å‡ºã€è§’è‰²åˆ‡æ¢ã€è§’è‰²æ‰®æ¼”ï¼‰
uv run python -m aira.server.cli chat --session demo

# æŒ‡å®šåˆå§‹è§’è‰²
uv run python -m aira.server.cli chat --persona tsundere

# å…³é—­æµå¼è¾“å‡º
uv run python -m aira.server.cli chat --session demo --no-stream

# å¯¹è¯ä¸­å¯ç”¨å‘½ä»¤ï¼š
# /switch <è§’è‰²> - åˆ‡æ¢é¢„è®¾è§’è‰²ï¼ˆæ”¯æŒ16+ç§é¢„è®¾è§’è‰²ï¼‰
#   åŸºç¡€: aira, tsundere, cold, straight, dark, ojousama, king, slave, otaku, athlete
#   ç»å…¸è§’è‰²: charas/aira_plastic_memories, charas/atri, charas/kohaku, charas/renge, charas/kurisu, charas/youmu
# /role <è§’è‰²> - è§’è‰²æ‰®æ¼”æ¨¡å¼ï¼ˆè‡ªç”±æ‰®æ¼”ä»»æ„è§’è‰²ï¼‰
# /reset - é‡ç½®è§’è‰²
# /help - å¸®åŠ©

# å¯åŠ¨æ¡Œé¢å‰ç«¯ï¼ˆéœ€è¦å…ˆå¯åŠ¨ API æœåŠ¡ï¼‰
uv run python run_desktop.py

# æˆ–é€šè¿‡ CLI å¯åŠ¨
uv run python -m aira.server.cli desktop
```

## æ¡Œé¢å‰ç«¯
AIRA æä¾›äº†åŠŸèƒ½å®Œæ•´çš„å¢å¼ºç‰ˆæ¡Œé¢åº”ç”¨ï¼š

### å¢å¼ºç‰ˆæ¡Œé¢åº”ç”¨ (`run_desktop.py`)
- ğŸŒŠ **æµå¼å“åº”**ï¼šå®æ—¶æ˜¾ç¤º AI ç”Ÿæˆå†…å®¹
- ğŸ’¾ **æœ¬åœ°å­˜å‚¨**ï¼šå¯¹è¯å†å²è‡ªåŠ¨ä¿å­˜ï¼ˆSQLiteï¼‰
- ğŸ–¼ï¸ **å›¾åƒæ”¯æŒ**ï¼šä¸Šä¼ å’Œæ˜¾ç¤ºå›¾ç‰‡
- ğŸ¤ **è¯­éŸ³æ¶ˆæ¯**ï¼šå½•éŸ³ã€æ’­æ”¾ã€ASR è¯†åˆ«
- ğŸ“„ **æ–‡æ¡£ä¸Šä¼ **ï¼šæ”¯æŒå¤šç§æ–‡æ¡£æ ¼å¼
- ğŸ¨ **è‡ªå®šä¹‰ä¸»é¢˜**ï¼š6ç§ç²¾ç¾ä¸»é¢˜éšå¿ƒåˆ‡æ¢
- âš¡ **ä¾¿æ·å›å¤**ï¼šå¿«é€Ÿå›å¤å¸¸ç”¨çŸ­è¯­
- ğŸŒ **å¤šè¯­è¨€**ï¼šå¯é™å®š AI å›å¤è¯­è¨€
- âœ¨ **ç¾è§‚ç•Œé¢**ï¼šæ°”æ³¡å¼æ¶ˆæ¯æ˜¾ç¤º
- ğŸ”„ **å¤šä¼šè¯ç®¡ç†**ï¼šä¼šè¯å’Œè§’è‰²åˆ‡æ¢
- ğŸ“Š **çŠ¶æ€ç›‘æ§**ï¼šå®æ—¶è¿æ¥çŠ¶æ€æ˜¾ç¤º

è¯¦ç»†ä½¿ç”¨è¯´æ˜ï¼š
- [README_DESKTOP_ENHANCED.md](README_DESKTOP_ENHANCED.md)
- [docs/desktop_guide.md](docs/desktop_guide.md)

## ğŸ“Š Monitor ç›‘æ§æœåŠ¡

Airaæä¾›ç‹¬ç«‹çš„Webç›‘æ§æœåŠ¡ï¼Œå®æ—¶æŸ¥çœ‹AIä½¿ç”¨æƒ…å†µã€‚**Monitorä½œä¸ºç‹¬ç«‹è¿›ç¨‹è¿è¡Œï¼Œå³ä½¿ä¸»ç¨‹åºå…³é—­ä¹Ÿèƒ½ç»§ç»­è®¿é—®ã€‚**

### ç‰¹æ€§
- âœ… **ç‹¬ç«‹è¿›ç¨‹**ï¼šä¸ä¸»ç¨‹åºåˆ†ç¦»ï¼Œäº’ä¸å½±å“
- ğŸ“ˆ **å®æ—¶ç»Ÿè®¡**ï¼šè¯·æ±‚æ•°ã€Tokenä½¿ç”¨é‡ã€æˆæœ¬åˆ†æ
- ğŸŒ **Webç•Œé¢**ï¼šç¾è§‚çš„å¯è§†åŒ–ä»ªè¡¨æ¿
- ğŸ”Œ **REST API**ï¼šå®Œæ•´çš„APIæ¥å£
- ğŸ”„ **è‡ªåŠ¨åˆ·æ–°**ï¼šæ¯30ç§’è‡ªåŠ¨æ›´æ–°æ•°æ®
- ğŸ“Š **å¤šç»´åº¦åˆ†æ**ï¼šæŒ‰æ¨¡å‹ã€ä¼šè¯ã€æ—¶é—´ç»Ÿè®¡

### å¿«é€Ÿå¯åŠ¨

**Windows**:
```powershell
# åå°è¿è¡Œ
.\start_monitor.ps1

# è®¿é—®Webç•Œé¢
# http://localhost:8090
```

**Linux/macOS**:
```bash
# ç»™è„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
chmod +x start_monitor.sh stop_monitor.sh

# åå°è¿è¡Œ
./start_monitor.sh

# è®¿é—®Webç•Œé¢
# http://localhost:8090
```

### ç®¡ç†å‘½ä»¤

```bash
# åœæ­¢æœåŠ¡
./stop_monitor.sh       # Linux/macOS
.\stop_monitor.ps1      # Windows

# é‡å¯æœåŠ¡
./restart_monitor.sh    # Linux/macOS
.\restart_monitor.ps1   # Windows

# æŸ¥çœ‹æ—¥å¿—
tail -f logs/monitor.log              # Linux/macOS
Get-Content logs\monitor.log -Wait    # Windows
```

### APIæ¥å£

```bash
# è·å–ç»Ÿè®¡æ‘˜è¦
curl http://localhost:8090/api/stats/summary?days=7

# è·å–æœ€è¿‘è¯·æ±‚
curl http://localhost:8090/api/stats/recent?limit=50

# å¥åº·æ£€æŸ¥
curl http://localhost:8090/api/health
```

è¯¦ç»†æ–‡æ¡£ï¼š[docs/monitor_guide.md](docs/monitor_guide.md)

## ğŸ¤ TTS (Text-to-Speech) è¯­éŸ³åˆæˆ + æ™ºèƒ½ç¿»è¯‘

Airaé›†æˆäº†å¼ºå¤§çš„TTSåŠŸèƒ½å’Œæ™ºèƒ½ç¿»è¯‘Agentï¼Œè®©AIåŠ©æ‰‹èƒ½å¤Ÿ"è¯´è¯"å¹¶æ”¯æŒå¤šè¯­è¨€è¾“å‡ºï¼

### æ”¯æŒçš„TTSæœåŠ¡

| æä¾›å•† | æˆæœ¬ | è´¨é‡ | ç‰¹ç‚¹ |
|--------|------|------|------|
| **Edge TTS** | å…è´¹ | é«˜ | æ¨èæ—¥å¸¸ä½¿ç”¨ï¼Œæ— éœ€APIå¯†é’¥ |
| **Minimax** | ä»˜è´¹ | æé«˜ | ä¸­æ–‡è´¨é‡æœ€ä½³ |
| **Azure TTS** | ä»˜è´¹ | æé«˜ | ä¼ä¸šçº§ï¼Œæ”¯æŒ100+è¯­è¨€ |
| **Google Cloud TTS** | ä»˜è´¹ | æé«˜ | WaveNetï¼Œæœ€è‡ªç„¶ |

### å¿«é€Ÿä½¿ç”¨

```python
from aira.tts import get_tts_gateway

# ä½¿ç”¨å…è´¹çš„Edge TTS
gateway = get_tts_gateway()

# æ–¹å¼1: è‡ªåŠ¨æ£€æµ‹è¯­è¨€å¹¶é€‰æ‹©åˆé€‚çš„è¯­éŸ³ï¼ˆæ¨èï¼‰
result = await gateway.synthesize(
    text="ä½ å¥½ï¼Œæˆ‘æ˜¯è‰¾æ‹‰ï¼",  # è‡ªåŠ¨æ£€æµ‹ä¸­æ–‡ï¼Œé€‰æ‹©ä¸­æ–‡è¯­éŸ³
    provider="edge",
    auto_detect_language=True  # é»˜è®¤å¼€å¯
)

# æ–¹å¼2: æŒ‡å®šåå¥½è¯­è¨€
result = await gateway.synthesize(
    text="Hello! ä½ å¥½ï¼",  # æ··åˆè¯­è¨€
    provider="edge",
    preferred_language="en"  # å¼ºåˆ¶ä½¿ç”¨è‹±æ–‡è¯­éŸ³
)

# æ–¹å¼3: å®Œå…¨æ‰‹åŠ¨æŒ‡å®š
result = await gateway.synthesize(
    text="ä½ å¥½ï¼Œæˆ‘æ˜¯è‰¾æ‹‰ï¼",
    provider="edge",
    voice="zh-CN-XiaoxiaoNeural"  # æ‰‹åŠ¨æŒ‡å®š
)

print(f"éŸ³é¢‘æ–‡ä»¶: {result.audio_path}")
```

### ğŸŒ æ™ºèƒ½ç¿»è¯‘ + TTSï¼ˆæ–°åŠŸèƒ½ï¼ï¼‰

**åœºæ™¯**ï¼šLLMç”¨ä¸­æ–‡å›å¤ï¼Œä½†å¸Œæœ›TTSè¾“å‡ºæ—¥è¯­/è‹±è¯­ç­‰å…¶ä»–è¯­è¨€

```python
from aira.tts import get_tts_gateway

gateway = get_tts_gateway()

# LLMç”¨ä¸­æ–‡æ€è€ƒå’Œå›å¤ï¼ˆæˆæœ¬ä½ï¼‰
llm_output_zh = "ä½ å¥½ï¼Œä»Šå¤©å¤©æ°”çœŸå¥½ï¼"

# è‡ªåŠ¨ç¿»è¯‘ä¸ºæ—¥è¯­å¹¶ç”Ÿæˆæ—¥è¯­è¯­éŸ³
result = await gateway.synthesize(
    text=llm_output_zh,
    provider="edge",
    auto_translate=True,    # å¯ç”¨è‡ªåŠ¨ç¿»è¯‘
    target_language="ja"    # ç›®æ ‡è¯­è¨€ï¼šæ—¥è¯­
)

print(f"éŸ³é¢‘æ–‡ä»¶: {result.audio_path}")
# è¾“å‡º: æ—¥è¯­è¯­éŸ³æ–‡ä»¶ï¼ˆå†…å®¹å·²è‡ªåŠ¨ç¿»è¯‘ï¼‰
```

**æˆæœ¬ä¼˜åŠ¿**ï¼š
- LLM: ä½¿ç”¨ä¾¿å®œçš„ä¸­æ–‡æ¨¡å‹
- ç¿»è¯‘: ä½¿ç”¨gpt-4o-miniï¼ˆ$0.15/1M tokensï¼‰
- TTS: ä½¿ç”¨å…è´¹çš„Edge TTS
- **æ€»æˆæœ¬ï¼šæä½ï¼**

### æµ‹è¯•TTS

```bash
# æµ‹è¯•æ‰€æœ‰æä¾›å•†
python examples/test_tts.py

# æµ‹è¯•ç‰¹å®šæä¾›å•†
python examples/test_tts.py --provider edge

# åˆ—å‡ºæ‰€æœ‰å¯ç”¨è¯­éŸ³
python examples/test_tts.py --list-voices
```

### ç¯å¢ƒå˜é‡é…ç½®

```bash
# .env æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
MINIMAX_API_KEY=your_minimax_api_key       # Minimax
AZURE_TTS_KEY=your_azure_key               # Azure
GOOGLE_CLOUD_API_KEY=your_google_api_key   # Google
```

è¯¦ç»†æ–‡æ¡£ï¼š[docs/tts_guide.md](docs/tts_guide.md)

## ğŸ™ï¸ ASR (Automatic Speech Recognition) è¯­éŸ³è¯†åˆ«

Airaé›†æˆäº†ASRåŠŸèƒ½ï¼Œå°†è¯­éŸ³è½¬ä¸ºæ–‡å­—ï¼Œä¸TTSå½¢æˆå®Œæ•´çš„è¯­éŸ³å¯¹è¯èƒ½åŠ›ï¼

### æ”¯æŒçš„ASRæœåŠ¡

| æä¾›å•† | æˆæœ¬ | è´¨é‡ | ç‰¹ç‚¹ |
|--------|------|------|------|
| **Faster-Whisper** | å…è´¹ | é«˜ | æœ¬åœ°è¿è¡Œï¼Œæ¨èæ—¥å¸¸ä½¿ç”¨ |
| **OpenAI Whisper** | ä»˜è´¹ | æé«˜ | å®˜æ–¹APIï¼Œ97+è¯­è¨€ |
| **Azure Speech** | ä»˜è´¹ | æé«˜ | ä¼ä¸šçº§ï¼Œå®æ—¶è¯†åˆ« |
| **Google Speech** | ä»˜è´¹ | æé«˜ | å‡†ç¡®åº¦æœ€é«˜ |

### å¿«é€Ÿä½¿ç”¨

```python
from aira.asr import get_asr_gateway

# ä½¿ç”¨æœ¬åœ°å…è´¹çš„Faster-Whisper
gateway = get_asr_gateway()
result = await gateway.transcribe(
    audio_path="audio.mp3",
    provider="faster_whisper"
)

print(f"è¯†åˆ«ç»“æœ: {result.text}")
print(f"æ£€æµ‹è¯­è¨€: {result.language}")
```

### å®Œæ•´è¯­éŸ³å¯¹è¯

```python
from aira.tts import get_tts_gateway
from aira.asr import get_asr_gateway

# AIè¯´è¯
tts = get_tts_gateway()
await tts.synthesize(text="ä½ å¥½ï¼", provider="edge")

# è¯†åˆ«ç”¨æˆ·è¯­éŸ³
asr = get_asr_gateway()
result = await asr.transcribe("user.mp3", provider="faster_whisper")
print(f"ç”¨æˆ·è¯´: {result.text}")
```

### æµ‹è¯•ASR

```bash
# æµ‹è¯•ASRåŠŸèƒ½
python examples/test_asr.py

# æµ‹è¯•æŒ‡å®šéŸ³é¢‘
python examples/test_asr.py --audio your_audio.mp3
```

### ç¯å¢ƒå˜é‡é…ç½®ï¼ˆå¯é€‰ï¼‰

```bash
# .env æ–‡ä»¶ï¼ˆäº‘ç«¯APIéœ€è¦ï¼‰
OPENAI_API_KEY=your_key                # OpenAI Whisper
AZURE_SPEECH_KEY=your_key              # Azure Speech  
GOOGLE_CLOUD_API_KEY=your_key          # Google Speech
```

è¯¦ç»†æ–‡æ¡£ï¼š[ASR_COMPLETE.md](ASR_COMPLETE.md)

## ç‰¹æ€§é€Ÿè§ˆ
- **é…ç½®çƒ­åŠ è½½**ï¼š`ConfigWatcher` é…åˆ watchfiles å®æ—¶åˆ·æ–° TOML é…ç½®
- **æ¨¡å‹ç½‘å…³**ï¼šå·²æ¥å…¥ `openai`(Chat Completions å…¼å®¹)ã€`vllm`(OpenAIå…¼å®¹)ã€`ollama`ã€`hf`(æœ¬åœ° Qwen/Llama)ã€`gemini`ï¼Œå¯é€šè¿‡å‰ç¼€/åˆ«åè·¯ç”±
- **å¤–æ¥æ€ç»´é“¾ (CoT)**ï¼šä¸ºä¸æ”¯æŒåŸç”Ÿæ€ç»´é“¾çš„æ¨¡å‹ï¼ˆQwenã€Kimiã€GLMã€DeepSeekç­‰ï¼‰æä¾›å¤–æ¥ Chain-of-Thought åŠŸèƒ½ï¼Œé€šè¿‡æç¤ºå·¥ç¨‹å¼•å¯¼é€æ­¥æ¨ç†
- **TTSè¯­éŸ³åˆæˆ**ï¼šæ”¯æŒMinimaxã€Azureã€Googleã€Edge TTSï¼Œè®©AIä¼šè¯´è¯
- **ASRè¯­éŸ³è¯†åˆ«**ï¼šæ”¯æŒWhisperã€Azureã€Googleã€Faster-Whisperï¼Œè®©AIå¬æ‡‚äººè¯
- **å·¥å…·æ‰§è¡Œ**ï¼š`ToolRunner` æ”¯æŒæœ¬åœ°å‡½æ•°ä¸ MCP Server è°ƒç”¨ï¼Œé…ç½®é©±åŠ¨åŠ è½½
- **ç»Ÿè®¡è¿½è¸ª**ï¼š`StatsTracker` è®°å½• tokenã€æ—¶é•¿ç­‰æŒ‡æ ‡ï¼Œåç»­å¯æŒä¹…åŒ–
- **åª’ä½“å·¥å…·**ï¼š`capture_photo` è°ƒç”¨æ‘„åƒå¤´æ‹ç…§ï¼Œ`screenshot` æŠ“å–å±å¹•ï¼Œå‡è¿”å›æœ¬åœ°è·¯å¾„å’Œ data-uri
- **åˆ›æ„è´´çº¸**ï¼š`sticker_picker` ä¸ emoji ç­–ç•¥ç»“åˆï¼Œæ”¯æŒå›å¤è¡¨æƒ…åŒ…é“¾æ¥
- **é¢„è®¾äººæ ¼**ï¼šå†…ç½® `aira`ã€`tsundere`ã€`cold`ã€`straight`ã€`dark`ã€`ojousama`ã€`king`ã€`slave`ã€`otaku`ã€`athlete` ç­‰é…ç½®ï¼Œå¯é€šè¿‡ `config/profiles/*.toml` åˆ‡æ¢

## LLM é€‚é…å™¨ä½¿ç”¨
- ç¯å¢ƒå˜é‡ï¼ˆæŒ‰éœ€è®¾ç½®ï¼‰
  - OpenAI: `OPENAI_API_KEY`ï¼Œå¯é€‰ `OPENAI_BASE_URL`ï¼ˆä»£ç†æˆ–è‡ªå»ºç½‘å…³ï¼‰
  - vLLM: `VLLM_BASE_URL`ï¼ˆé»˜è®¤ `http://localhost:8000/v1`ï¼‰ï¼Œå¯é€‰ `VLLM_API_KEY`
  - Ollama: `OLLAMA_BASE_URL`ï¼ˆé»˜è®¤ `http://localhost:11434`ï¼‰
  - Gemini: `GEMINI_API_KEY`ï¼Œå¯é€‰ `GEMINI_MODEL`

- è¯·æ±‚æ¨¡å‹åè§„åˆ™ï¼š`<å‰ç¼€>:<æ¨¡å‹å>`
  - `openai:gpt-4o`ã€`vllm:qwen2.5`ã€`ollama:llama3`

- é€šè¿‡ API æŒ‡å®šæ¨¡å‹ï¼ˆç¤ºä¾‹ï¼‰ï¼š
```bash
curl -s http://localhost:8080/api/v1/chat \
  -H 'Content-Type: application/json' \
  -d '{"message":"hello","session_id":"s1","persona_id":"aira"}'
```
ï¼ˆé»˜è®¤æ¨¡å‹è¯»å– `config/aira.toml` çš„ `app.default_model`ï¼Œäº¦å¯æ‰©å±•æ¥å£åœ¨ body ä¸­ä¼ å…¥ `model` å­—æ®µï¼‰

## Chain-of-Thought (æ€ç»´é“¾) åŠŸèƒ½

AIRA ä¸ºä¸æ”¯æŒåŸç”Ÿæ€ç»´é“¾çš„æ¨¡å‹æä¾›äº†å¤–æ¥ CoT åŠŸèƒ½ï¼Œé€šè¿‡æç¤ºå·¥ç¨‹å¼•å¯¼æ¨¡å‹è¿›è¡Œé€æ­¥æ¨ç†ã€‚

### é€‚ç”¨æ¨¡å‹

**æ¨èå¯ç”¨ CoT çš„æ¨¡å‹**ï¼ˆä¸æ”¯æŒåŸç”Ÿæ€ç»´é“¾ï¼‰ï¼š
- Qwenï¼ˆé€šä¹‰åƒé—®ï¼‰
- Kimiï¼ˆæœˆä¹‹æš—é¢ï¼‰
- GLMï¼ˆæ™ºè°±ï¼‰
- DeepSeekï¼ˆé R1 ç‰ˆæœ¬ï¼‰
- Ollama æœ¬åœ°æ¨¡å‹
- vLLM æœ¬åœ°éƒ¨ç½²
- HuggingFace æœ¬åœ°æ¨¡å‹

**ä¸éœ€è¦ CoT çš„æ¨¡å‹**ï¼ˆæ”¯æŒåŸç”Ÿæ¨ç†ï¼‰ï¼š
- OpenAI o1/o1-mini
- Claude 3.5 Sonnet
- Gemini Pro
- DeepSeek R1

### é…ç½®

åœ¨ `config/aira.toml` ä¸­å¯ç”¨ï¼š

```toml
[models.cot]
enabled = true              # å¯ç”¨ CoT åŠŸèƒ½
show_reasoning = false      # æ˜¯å¦æ˜¾ç¤ºæ¨ç†è¿‡ç¨‹
enable_few_shot = true      # ä½¿ç”¨å°‘æ ·æœ¬ç¤ºä¾‹
models_to_wrap = [
    "qwen", "kimi", "glm", "deepseek",
    "ollama", "vllm", "hf"
]
```

### ä½¿ç”¨ç¤ºä¾‹

```bash
# CLI ä½¿ç”¨ï¼ˆè‡ªåŠ¨åº”ç”¨ CoTï¼‰
uv run python -m aira.server.cli chat --model qwen:qwen-plus

# è¿è¡Œæ¼”ç¤ºè„šæœ¬
uv run python examples/cot_example.py
```

è¯¦ç»†æ–‡æ¡£è¯·æŸ¥çœ‹ [docs/cot_guide.md](docs/cot_guide.md)